import zipfile
import os

def convert_assembly_file_content(content):

    lines = content.splitlines()
    formatted_lines = ''.join([line.strip() + '\\n ' for line in lines])

    formatted_lines = formatted_lines.strip()
    return formatted_lines

def process_all_files_in_zip(zip_file_path, output_zip_file_path):
    try:
        with zipfile.ZipFile(zip_file_path, 'r') as zip_ref:

            with zipfile.ZipFile(output_zip_file_path, 'w') as new_zip:
                for file_info in zip_ref.infolist():
                    with zip_ref.open(file_info) as input_file:
                        content = input_file.read().decode('utf-8')
                        formatted_content = convert_assembly_file_content(content)

                        new_zip.writestr(file_info.filename, formatted_content)
                        print(f"Processed {file_info.filename} and added to {output_zip_file_path}")

    except Exception as e:
        print(f"An error occurred: {e}")


zip_file_path = 'assembly_part_1_with_register_transpose.zip'
output_zip_file_path = 'assembly_part_1_with_register_transpose_formatted.zip'

process_all_files_in_zip(zip_file_path, output_zip_file_path)


